== Loading the code ==

ArduIMU+ comes with some basic test firmware loaded at the factory, but to get full functionality you should load the latest AHRS firmware. Here's how:

*1)* First, download the latest code from the [http://code.google.com/p/ardu-imu/downloads/list repository].

*2)* Then you need to [http://arduino.cc/en/Main/Software download Arduino] if you don't already have it and install it. The instructions for loading ArduIMU code are essentially the same as for !ArduPilot, so follow them [http://code.google.com/p/ardupilot/wiki/LoadingPage here] (especially the part about setting the "Set RTS on close" box and choosing the right board in the Arduino IDE) and then come back to this page.

*3): Now download the [http://code.google.com/p/ardu-imu/downloads/list latest ArduIMU software]. It will be named ArduIMU(version number).zip. *Unzip this main folder to your desktop.* Inside the main folder there should be two folders: "arduimu" and "libraries". Drag them to the Arduino Sketchbook folder you defined in the previous step. *Note: these are the same libraries as used in !ArduPilotMega and !ArduCopter. So if you've already loaded them, you don't have to copy the libraries folder again for !ArduIMU.* 

My example shown here (yours should be the same, minus my name!):

http://ardupilot-mega.googlecode.com/svn/ArduPilotMegaImages/sketchfile.png

And here's where I put the libraries and APM code folder (highlighted). 

http://ardupilot-mega.googlecode.com/svn/ArduPilotMegaImages/arduimufolder.png

We recommend you use exactly this file configuration. If you modify it, Arduino may not be able to find the libraries and you'll get compile errors.

*Important note: DO NOT drag the whole ArduIMU(version number) folder into your sketchfile directory. If you do, the code will not compile.* Instead, just drag the two individual folders within it--!ArduPilotMega and libraries--in the sketchfile folder as shown above. Once you've placed them in the sketchfile folder, you can delete the ArduIMU(version) folder on your desktop.

Now open the Arduino IDE and from the file menu, select "open" and navigate to the arduimu folder and click on "arduimu.pde". That will open all the files in the folder, which will all appear as tabs in the IDE. 

*3)* Open Arduino and load the ArduIMU code from your ArduIMU code folder by open the "arduimu.pde" file, which will open all the tabs. Make any configuration changes needed in the first tab of the code. If you just want to try out the IMU with the desktop demo programs, make sure the following configuration options are set as shown:

{{{
#define PRINT_ANALOGS 1 //Will print the analog raw data
#define PRINT_EULER 1   //Will print the Euler angles Roll, Pitch and Yaw
#define PRINT_GPS 1     //Will print GPS data

#define PRINT_BINARY 0   //Will print binary message and suppress ASCII messages (above)
}}}

If you want to use ArduIMU with !ArduPilot, set the following configuration option as shown:

{{{
#define PRINT_BINARY 1   //Will print binary message and suppress ASCII messages (above)
}}}

*4)* Then connect the FTDI cable to connector pins you soldered on the ArduIMU (check on the bottom of the board where it shows which orientation to plug the FTDI cable in--black is on one side) and use it to load the code on to the board. Again, the [http://code.google.com/p/ardupilot/wiki/LoadingPage instructions] for !ArduPilot are essentially the same, so refer to them if you're having trouble.